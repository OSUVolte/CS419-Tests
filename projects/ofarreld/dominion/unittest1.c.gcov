        -:    0:Source:unittest1.c
        -:    0:Graph:unittest1.gcno
        -:    0:Data:unittest1.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "dominion.h"
        -:    2:#include "dominion_helpers.h"
        -:    3:#include <string.h>
        -:    4:#include <stdio.h>
        -:    5:#include <assert.h>
        -:    6:#include "rngs.h"
        -:    7:#include <stdlib.h>
        -:    8:#include <math.h>
        -:    9:
        -:   10:
        -:   11:#include "testHelper.h"
        -:   12:
        -:   13:#define TESTCARD "shuffle"
        -:   14:
        1:   15:int main() {
        -:   16:
        1:   17:	int newCards = 0;
        1:   18:	int discarded = 1;
        1:   19:	int newCoins = 0;
        1:   20:	int shuffledCards = 0;
        1:   21:	int a = 0, b = 0, c= 0;
        1:   22:	int handpos = 0, choice1 = 0, choice2 = 0, choice3 = 0, bonus = 0;
        -:   23:	int remove1, remove2;
        1:   24:	int seed = 1000;
        1:   25:	int numPlayers = 2;
        1:   26:	int thisPlayer = 0;
        1:   27:	int otherPlayer = 1;
        1:   28:	int found = 0;
        -:   29:
        -:   30:	struct gameState G, testG;
        1:   31:	int k[10] = {adventurer, embargo, village, minion, mine, cutpurse,
        -:   32:		sea_hag, tribute, smithy, council_room};
        -:   33:	
        1:   34:	initializeGame(numPlayers, k, seed, &G);
        1:   35:	printf("\t Testing Function: %s \n", TESTCARD);
        -:   36:
        -:   37:	// boot up the perfect version
        1:   38:	memcpy(&testG, &G, sizeof(struct gameState));
        -:   39:	// Test 01 -----------------------------------------------------------------
        1:   40:	printf("Test 01: Run Shuffle and check positions \n");
        1:   41:	shuffle(thisPlayer, &testG);
        -:   42:	
        -:   43:	// testG.deck[thisPlayer][a]
        -:   44:
        1:   45:	printf("Testing Player 1 Deck Size...\t");
        1:   46:	if (testG.deckCount[thisPlayer] != G.deckCount[thisPlayer] ){ 
    #####:   47:		printf("ERROR\n");
    #####:   48:		printf("deck count = %d, expected = %d\n", testG.deckCount[thisPlayer], 
    #####:   49:			G.handCount[thisPlayer] - newCards + shuffledCards);
        -:   50:	} else { 
        1:   51:		printf("PASS\n");
        -:   52:	}
        -:   53:
        1:   54:	printf("Testing Player 1 deck integrity...\t");
        -:   55:	// Ensure cards are still in deck
        -:   56:	// sort deck cards into containers
        -:   57:	int GCont[MAX_DECK], testGCont[MAX_DECK];
        7:   58:	while (a < G.deckCount[thisPlayer]) {
        -:   59:		//sort into containers
        5:   60:		GCont[G.deck[thisPlayer][a]]++;
        5:   61:		testGCont[testG.deck[thisPlayer][a]]++;
        5:   62:		a++;
        -:   63:	}
      502:   64:	while(b < MAX_DECK) {
      500:   65:		if (GCont[b] != testGCont[b]) {
    #####:   66:			printf("ERROR\n");
    #####:   67:			printf("Card %d: count: %d, expected= %d\n", b, testGCont[b], GCont[b]);
    #####:   68:			found = 1;
        -:   69:		}
      500:   70:		b++;
        -:   71:	}
        1:   72:	if (found == 0){
        1:   73:		printf("PASS\n");
        -:   74:	}
        1:   75:	printf("Testing Player 1 Hand Size...\t");
        1:   76:	if (testG.handCount[thisPlayer] != G.handCount[thisPlayer] ){ 
    #####:   77:		printf("ERROR\n");
    #####:   78:		printf("...");
        -:   79:	} else { 
        1:   80:		printf("PASS\n");
        -:   81:	}
        -:   82:
        1:   83:	genericTest(G, testG, otherPlayer, 0);
        1:   84:	return 0;
        -:   85:}
        -:   86:
